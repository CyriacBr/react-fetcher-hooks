(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./docs/hooks/use-fetcher.mdx":function(e,t,n){"use strict";n.r(t);var a=n("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("../../node_modules/react/index.js"),s=n.n(r),c=n("../../node_modules/@mdx-js/react/dist/index.es.js"),o=(n("../../node_modules/bulma/css/bulma.css"),n("./src/index.css"),n("../library/dist/styles.css"),n("./src/Preview.tsx")),i=n("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),l=n("../library/dist/index.es.js"),b=n("../../node_modules/axios/index.js"),d=n.n(b),m=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(l.b)();function o(){c.fetch(function(){return d.a.get("https://api.chucknorris.io/jokes/random")},function(e){a(e)})}return Object(r.useEffect)(function(){return o()},[]),s.a.createElement("div",{className:"test-container"},s.a.createElement(l.a,{refs:[c]},s.a.createElement("span",{className:"my-title"},"Random JSON loader"),s.a.createElement("div",{className:"my-content"},s.a.createElement("pre",null,s.a.createElement("code",null,JSON.stringify(n,null,2)))),s.a.createElement("div",{className:"my-footer"},s.a.createElement("a",{className:"button is-primary",onClick:o},"Refresh"))))},u=m;m&&m===Object(m)&&Object.isExtensible(m)&&Object.defineProperty(m,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UseFetcherExample",filename:"src/components/UseFetcherExample.tsx"}});var p="import React, { useState, useEffect } from 'react';\nimport { Fetcher, useFetcher } from 'react-fetcher-hooks';\nimport axios from 'axios';\n\nconst UseFetcherExample = () => {\n  const [json, setJson] = useState();\n  const ref = useFetcher();\n\n  function getJson() {\n    ref.fetch(() => axios.get<any>('https://api.chucknorris.io/jokes/random'), data => {\n      setJson(data);\n    });\n  }\n\n  useEffect(() => getJson(), []);\n\n  return (\n    <div className='test-container'>\n      <Fetcher refs={[ref]}>\n        <span className='my-title'>Random JSON loader</span>\n        <div className='my-content'>\n          <pre>\n            <code>{JSON.stringify(json, null, 2)}</code>\n          </pre>\n        </div>\n        <div className='my-footer'>\n          <a className='button is-primary' onClick={getJson}>\n            Refresh\n          </a>\n        </div>\n      </Fetcher>\n    </div>\n  );\n};\n\nexport default UseFetcherExample;\n";n.d(t,"default",function(){return h});var f={},j="wrapper";function h(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)(j,Object.assign({},f,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"usefetcher"},"UseFetcher"),Object(c.b)("p",null,"It is the most flexible hook but the most verbose. It serves as a building block for all\nthe other hooks."),Object(c.b)("h2",{id:"usage"},"Usage"),Object(c.b)("h3",{id:"usefetcher-1"},"useFetcher"),Object(c.b)("p",null,"Create a simple fetcher reference."),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"const ref = useFetcher();\n")),Object(c.b)("h3",{id:"fetch"},"fetch"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.fetch(request: () => AxiosPromise, onResult: data => void)"),Object(c.b)("br",{parentName:"p"}),"\n","Perform a request."),Object(c.b)(o.a,{tabNames:["JavaScript","TypeScript"],mdxType:"Preview"},Object(c.b)("editor",null,"ref.fetch(() => axios.get('users'), data => {\n  // do something with data\n});\n"),Object(c.b)("editor",null,"ref.fetch(() => axios.get<User[]>('users'), data => {\n  // do something with data\n  // data is of type User[]\n});\n")),Object(c.b)("h3",{id:"fetchmany"},"fetchMany"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.fetch(request: () => AxiosPromise[], onResult: data => void)"),Object(c.b)("br",{parentName:"p"}),"\n","Perform multiple axios requests at once."),Object(c.b)(o.a,{tabNames:["JavaScript","TypeScript"],mdxType:"Preview"},Object(c.b)("editor",null,"ref.fetch(() => [axios.get('users'), axios.get('cats')], data => {\n  // do something with data\n});\n"),Object(c.b)("editor",null,"ref.fetch(() => [axios.get<User[]>('users'), axios.get<Cat[]>('cats')], data => {\n  // do something with data\n  // data is of type [User[], Cat[]]\n});\n")),Object(c.b)("h3",{id:"handle"},"handle"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.handle(request: () => Promise, onResult: data => void)"),Object(c.b)("br",{parentName:"p"}),"\n","Handle anything, as long as it returns a ",Object(c.b)("inlineCode",{parentName:"p"},"Promise"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"const doSomething = () => {\n  return new Promise((resolve, reject) => {\n    // Wait 3s\n    setTimeout(() => {\n      resolve('foo');\n    }, 3000);\n  });\n};\n")),Object(c.b)(o.a,{tabNames:["JavaScript","TypeScript"],mdxType:"Preview"},Object(c.b)("editor",null,"ref.handle(() => doSomething(), data => {\n  // data is 'foo'\n});\n"),Object(c.b)("editor",null,"ref.handle(() => doSomething(), data => {\n  // data is 'foo' and its type is infered\n});\n")),Object(c.b)("h3",{id:"setloading"},"setLoading"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.setLoading(value: boolean)"),Object(c.b)("br",{parentName:"p"}),"\n","Mnually trigger the loading state.  "),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"ref.setLoading(true);\nref.setLoading(false);\n")),Object(c.b)("h3",{id:"seterror"},"setError"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.setLoadingsetError(message: string, allowRetry: boolean)"),Object(c.b)("br",{parentName:"p"}),"\n","Manually trigger the error state.  "),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"ref.setError('Oops!');\nref.setError('Something went wrong', true);\n")),Object(c.b)("h3",{id:"cancel"},"cancel"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.cancel()"),Object(c.b)("br",{parentName:"p"}),"\n","Cancel the ongoing request. What that means is that the ",Object(c.b)("inlineCode",{parentName:"p"},"onResult")," callback will not be called if the request\never returns."),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"ref.cancel();\n")),Object(c.b)("h3",{id:"retry"},"retry"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"FetcherRef.retry()"),Object(c.b)("br",{parentName:"p"}),"\n","Will try again an ongoing request that has failed."),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"ref.retry();\n")),Object(c.b)("h2",{id:"example"},"Example"),Object(c.b)(o.a,{mdxType:"Preview"},Object(c.b)(u,{mdxType:"UseFetcherExample"}),Object(c.b)("editor",null,p)))}h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs/hooks/use-fetcher.mdx"}}),h.isMDXComponent=!0},"./src/Preview.tsx":function(e,t,n){"use strict";var a=n("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("../../node_modules/react/index.js"),s=n.n(r);n("../../node_modules/bulma/css/bulma.css"),n("./src/index.css");"undefined"!==typeof PreviewProps&&PreviewProps&&PreviewProps===Object(PreviewProps)&&Object.isExtensible(PreviewProps)&&Object.defineProperty(PreviewProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PreviewProps",filename:"src/Preview.tsx"}});var c=function(e){var t=e.children,n=e.tabNames,c=Object(r.useState)(0),o=Object(a.a)(c,2),i=o[0],l=o[1],b=s.a.Children.toArray(t);return s.a.createElement("div",{className:"preview-container"},s.a.createElement("div",{className:"tabs"},s.a.createElement("ul",null,b.map(function(e,t){return s.a.createElement("li",{key:t,className:i===t?"is-active":""},s.a.createElement("a",{onClick:function(){return l(t)}},(n||["Result","Code"])[t]))}))),s.a.createElement("div",{className:"tab-content"},b[i]))};t.a=c,c&&c===Object(c)&&Object.isExtensible(c)&&Object.defineProperty(c,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Preview",filename:"src/Preview.tsx"}})}}]);
//# sourceMappingURL=docs-hooks-use-fetcher.82435536e1c2cfc8da27.js.map