(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./docs/hooks/use-request.mdx":function(e,t,s){"use strict";s.r(t);var n=s("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=s("../../node_modules/react/index.js"),r=s.n(a),o=s("../../node_modules/@mdx-js/react/dist/index.es.js"),i=(s("../../node_modules/bulma/css/bulma.css"),s("./src/index.css"),s("../library/dist/styles.css"),s("./src/Preview.tsx")),c=s("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),l=s("../library/dist/index.es.js"),u=s("../../node_modules/axios/index.js"),m=s.n(u),d=function(){var e=Object(l.c)(function(){return m.a.get("https://api.chucknorris.io/jokes/random")},!0),t=Object(c.a)(e,3),s=t[0],n=t[1],a=t[2];return r.a.createElement("div",{className:"test-container"},r.a.createElement(l.a,{refs:[s]},r.a.createElement("span",{className:"my-title"},"Random JSON loader"),r.a.createElement("div",{className:"my-content"},r.a.createElement("pre",null,r.a.createElement("code",null,JSON.stringify(a,null,2)))),r.a.createElement("div",{className:"my-footer"},r.a.createElement("a",{className:"button is-primary",onClick:n},"Refresh"))))},b=d;d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UseRequestExample",filename:"src/components/UseRequestExample.tsx"}});var p="import React, { useState, useEffect } from 'react';\nimport { useRequest, Fetcher } from 'react-fetcher-hooks';\nimport axios from 'axios';\n\nconst UseRequestExample = () => {\n  const [ref, getJson, json] = useRequest(\n    () => axios.get<any>('https://api.chucknorris.io/jokes/random'),\n    true\n  );\n\n  return (\n    <div className='test-container'>\n      <Fetcher refs={[ref]}>\n        <span className='my-title'>Random JSON loader</span>\n        <div className='my-content'>\n          <pre>\n            <code>{JSON.stringify(json, null, 2)}</code>\n          </pre>\n        </div>\n        <div className='my-footer'>\n          <a className='button is-primary' onClick={getJson}>\n            Refresh\n          </a>\n        </div>\n      </Fetcher>\n    </div>\n  );\n};\n\nexport default UseRequestExample;\n";s.d(t,"default",function(){return g});var f={},j="wrapper";function g(e){var t=e.components,s=Object(n.a)(e,["components"]);return Object(o.b)(j,Object.assign({},f,s,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"userequest"},"UseRequest"),Object(o.b)("p",null,"This is a simpler version of ",Object(o.b)("inlineCode",{parentName:"p"},"useFetcher")," to avoid verbosity."),Object(o.b)("h2",{id:"usage"},"Usage"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"useRequest(request: (...args: any[]) => AxiosPromise, autoFetch?: boolean)"),Object(o.b)("br",{parentName:"p"}),"\n","This hook returns a reference, a function to trigger the request, as well as a getter and setter from ",Object(o.b)("inlineCode",{parentName:"p"},"useState"),".\nYou can use your own axios instance (with configured base path, for example) with ",Object(o.b)("inlineCode",{parentName:"p"},"useRequest"),".  "),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"const [ref, get, items, setItems] = useRequest(() => axios.get('users'))\n")),Object(o.b)("p",null,"When passing true to the second argument, fetching will happen as soon as the component renders,\nso there's no need to manually trigger the request on mount."),Object(o.b)("h2",{id:"trigger-function"},"Trigger Function"),Object(o.b)("p",null,"You can pass parameters to the trigger function. For multiple parameters, use an array."),Object(o.b)(i.a,{tabNames:["JavaScript","TypeScript"],mdxType:"Preview"},Object(o.b)("editor",null,"const [ref, get, item, setItem] = useRequest((id) => axios.get(`users/${id}`));\nconst [updateRef, update] = useRequest(([id, data]) => axios.patch(`users/${id}`));\nget(1);\nupdate([1, { name: 'foo'}]);\n"),Object(o.b)("editor",null,"const [ref, get, item, setItem] = useRequest((id: number) => axios.get<User>(`users/${id}`));\nconst [updateRef, update] = useRequest(([id, data]: [number, User]) => axios.patch(`users/${id}`, data));\nget(1); // type is inferred\nupdate([1, { name: 'foo'}]); // type is inferred\n")),Object(o.b)("h3",{id:"callback"},"Callback"),Object(o.b)("p",null,"It is possible to pass a callback to a trigger function. It'll be called once the request is completed.\nWhen an error is encountered, it will not be called."),Object(o.b)(i.a,{tabNames:["JavaScript","TypeScript"],mdxType:"Preview"},Object(o.b)("editor",null,"const [ref, get, item, setItem] = useRequest((id) => axios.get(`users/${id}`));\nget(1, result => {\n  // do something\n});\n"),Object(o.b)("editor",null,"const [ref, get, item, setItem] = useRequest((id: number) => axios.get<User>(`users/${id}`));\nget(1, result => {\n  // do something\n  // type of result is 'User'\n});\n")),Object(o.b)("h2",{id:"example"},"Example"),Object(o.b)(i.a,{mdxType:"Preview"},Object(o.b)(b,{mdxType:"UseRequestExample"}),Object(o.b)("editor",null,p)))}g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs/hooks/use-request.mdx"}}),g.isMDXComponent=!0},"./src/Preview.tsx":function(e,t,s){"use strict";var n=s("../../node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),a=s("../../node_modules/react/index.js"),r=s.n(a);s("../../node_modules/bulma/css/bulma.css"),s("./src/index.css");"undefined"!==typeof PreviewProps&&PreviewProps&&PreviewProps===Object(PreviewProps)&&Object.isExtensible(PreviewProps)&&Object.defineProperty(PreviewProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PreviewProps",filename:"src/Preview.tsx"}});var o=function(e){var t=e.children,s=e.tabNames,o=Object(a.useState)(0),i=Object(n.a)(o,2),c=i[0],l=i[1],u=r.a.Children.toArray(t);return r.a.createElement("div",{className:"preview-container"},r.a.createElement("div",{className:"tabs"},r.a.createElement("ul",null,u.map(function(e,t){return r.a.createElement("li",{key:t,className:c===t?"is-active":""},r.a.createElement("a",{onClick:function(){return l(t)}},(s||["Result","Code"])[t]))}))),r.a.createElement("div",{className:"tab-content"},u[c]))};t.a=o,o&&o===Object(o)&&Object.isExtensible(o)&&Object.defineProperty(o,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Preview",filename:"src/Preview.tsx"}})}}]);
//# sourceMappingURL=docs-hooks-use-request.82435536e1c2cfc8da27.js.map